# Fizikl - Персонализированный опрос здоровья

> Веб-приложение для сбора данных о здоровье и отображения персонализированного дашборда с результатами

## Возможности

- 10 вопросов о здоровье и образе жизни
- Персонализированный дашборд с визуализацией
- 9 ключевых метрик здоровья (0-100)
- Рекомендации на основе ответов
- Цветовая кодировка результатов (зелёный/жёлтый/красный)
- Адаптивный дизайн (мобильный/планшет/десктоп)
- Плавные анимации появления элементов

## Быстрый старт

```bash
# Клонировать репозиторий
git clone https://github.com/AgasiArgent/fizikl.git
cd fizikl

# Запустить приложение
docker compose up
```

После запуска:
- **Frontend:** http://localhost:3000
- **Backend API:** http://localhost:8000

## Страницы

### 1. Лендинг (`/`)
Приветственная страница с описанием сервиса и кнопкой "Начать опрос".

### 2. Опросник (`/survey`)
10 вопросов с прогресс-баром:
1. Имя
2. Возраст (18-80)
3. Уровень активности (Низкий/Средний/Высокий/Очень высокий)
4. Цель (Похудение/Набор массы/Поддержание формы/Улучшение здоровья)
5. Тренировки в неделю (0-7)
6. Часы сна (4-12)
7. Уровень стресса (1-10)
8. Потребление воды (0-5 л)
9. Частота фастфуда
10. Курение (да/нет)

### 3. Дашборд результатов (`/results/[id]`)

```
┌─────────────────────────────────────────────────┐
│  Результаты для [Имя]                           │
│  Цель • Возраст • Персона-тег                   │
├─────────────────────────────────────────────────┤
│  [Индекс здоровья] [Готовность] [Энергия]       │  ← 3 главных метрики
├─────────────────────────────────────────────────┤
│  ⚠️ Alerts (предупреждения о рисках)            │
├─────────────────────────────────────────────────┤
│  ┌───────────────────┐  ┌─────────────────────┐ │
│  │ Активность и      │  │ Баланс и риски      │ │
│  │ восстановление    │  │                     │ │
│  │                   │  │ 🟢 Баланс        76 │ │
│  │  [Apple Watch     │  │ 🟢 Кардио-риск   15 │ │
│  │   Rings]          │  │ 🟡 Метаб.нагр.   26 │ │
│  │                   │  │   (3 mini donuts)   │ │
│  └───────────────────┘  └─────────────────────┘ │
├─────────────────────────────────────────────────┤
│  Профиль здоровья                               │
│  [Radar 8 метрик]  │  Список 9 метрик с числами │
├─────────────────────────────────────────────────┤
│  ✓ Сильные стороны  │  ↑ Зоны роста             │
├─────────────────────────────────────────────────┤
│  Рекомендации (топ-3 выделены)                  │
├─────────────────────────────────────────────────┤
│  CTA: "Получить персональный план"              │
└─────────────────────────────────────────────────┘
```

## Метрики

| Метрика | Описание | Инверсия | Отображается |
|---------|----------|----------|--------------|
| health_index | Общий индекс здоровья | — | ✓ |
| readiness | Готовность к нагрузкам | — | ✓ |
| energy_index | Энергия (сон + стресс + вода) | — | ✓ |
| activity_score | Уровень активности | — | ✓ |
| recovery_quality | Качество восстановления | — | ✓ |
| consistency | Стабильность привычек | — | ✓ |
| lifestyle_balance | Баланс образа жизни | — | ✓ |
| cardio_risk | Кардио-риск | ✓ (меньше = лучше) | ✓ |
| metabolic_load | Метаболическая нагрузка | ✓ (меньше = лучше) | ✓ |
| confidence | Уверенность в данных | — | — (только в БД) |

## Архитектура

```
┌─────────────┐     ┌─────────────┐     ┌─────────────┐
│   Frontend  │────▶│   Backend   │────▶│   SQLite    │
│   Next.js   │     │   FastAPI   │     │   Database  │
│   :3000     │     │   :8000     │     │             │
└─────────────┘     └─────────────┘     └─────────────┘
```

### Структура проекта

```
fizikl/
├── frontend/               # Next.js приложение
│   ├── src/
│   │   ├── app/           # Страницы (App Router)
│   │   │   ├── page.tsx           # Лендинг
│   │   │   ├── survey/page.tsx    # Опросник
│   │   │   └── results/[id]/      # Дашборд результатов
│   │   ├── components/ui/ # shadcn/ui компоненты
│   │   └── lib/           # API клиент, типы
│   └── Dockerfile
│
├── backend/                # FastAPI приложение
│   ├── app/
│   │   ├── main.py        # API эндпоинты
│   │   ├── models.py      # Pydantic модели
│   │   ├── insights.py    # Алгоритм расчёта метрик
│   │   └── database.py    # SQLite CRUD
│   └── Dockerfile
│
├── docker-compose.yml      # Оркестрация контейнеров
├── .env                    # Переменные окружения
└── .env.example            # Пример переменных
```

## Технологии

### Frontend
| Технология | Назначение |
|------------|------------|
| Next.js 14 | React фреймворк (App Router) |
| TypeScript | Типизация |
| Tailwind CSS | Стилизация |
| shadcn/ui | UI компоненты |
| Recharts | Radar chart, Pie chart |
| Framer Motion | Анимации |

### Backend
| Технология | Назначение |
|------------|------------|
| Python 3.11 | Язык программирования |
| FastAPI | API фреймворк |
| Pydantic | Валидация данных |
| SQLite | База данных |

### Инфраструктура
| Технология | Назначение |
|------------|------------|
| Docker | Контейнеризация |
| Docker Compose | Оркестрация |

## API

### POST /survey
Отправка ответов опроса и получение результатов.

**Request:**
```json
{
  "name": "Иван",
  "age": 30,
  "activity_level": "Средний",
  "goal": "Улучшение здоровья",
  "workouts_per_week": 3,
  "sleep_hours": 7.5,
  "stress_level": 5,
  "water_liters": 2.0,
  "fastfood_frequency": "Редко",
  "smokes": false
}
```

**Response:**
```json
{
  "id": "uuid",
  "results": {
    "user": { "name": "Иван", "age": 30, "goal": "Улучшение здоровья" },
    "gauges": {
      "health_index": 75,
      "readiness": 72,
      "energy_index": 65,
      "activity_score": 60,
      "recovery_quality": 80,
      "consistency": 70,
      "lifestyle_balance": 76,
      "cardio_risk": 15,
      "metabolic_load": 26,
      "confidence": 85
    },
    "insight": {
      "strengths": ["Хороший сон", "Низкий стресс"],
      "improvement_areas": ["Увеличить активность"],
      "persona_tag": "Сбалансированный новичок"
    },
    "recommendations": {
      "top_3": [...],
      "all": [...]
    },
    "flags": {
      "alerts": [...]
    }
  }
}
```

### GET /survey/{id}
Получение сохранённых результатов по ID.

## Разработка

### Локальный запуск без Docker

**Backend:**
```bash
cd backend
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate
pip install -r requirements.txt
uvicorn app.main:app --reload --port 8000
```

**Frontend:**
```bash
cd frontend
npm install
npm run dev
```

### Переменные окружения

| Переменная | Описание | По умолчанию |
|------------|----------|--------------|
| `NEXT_PUBLIC_API_URL` | URL бэкенда | `http://localhost:8000` |

## Лицензия

MIT
